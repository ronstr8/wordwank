# Global settings shared across all microservices
global:
  domain: wordwank.fazigu.org
  # The single port for all traffic (Frontend, API, WS)
  externalPort: 80
  registry: localhost:5000
  namespace: wordwank
  imageTag: latest
  imagePullPolicy: Always
  maxPlayers: 13
  randomLetterScoreMode: "true"
  gameDuration: 30
  rackSize: 7

# Centralized Ingress configuration
ingress:
  enabled: true
  host: wordwank.fazigu.org
  annotations:
    kubernetes.io/ingress.class: nginx
    # Cert-manager will automatically provision SSL certificate
    cert-manager.io/cluster-issuer: letsencrypt-prod
    # Redirect HTTP to HTTPS
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
  tls:
    enabled: true
    secretName: wordwank-tls

# Subchart overrides
frontend:
  enabled: true
  service:
    type: ClusterIP
    port: 80

wordd:
  enabled: true
  service:
    type: ClusterIP
    port: 2345

dictd:
  enabled: true
  service:
    type: ClusterIP
    port: 2628

backend:
  enabled: true
  image:
    tag: "latest"
  service:
    port: 3000
  database:
    url: "dbi:Pg:dbname=wordwank;host=postgresql"
    user: "wordwank_backend"

# PostgreSQL dependency configuration
postgresql:
  enabled: true
  fullnameOverride: postgresql
  image:
    tag: "latest"
  auth:
    database: "wordwank"
    username: "wordwank_backend"
  primary:
    initdb:
      scriptsConfigMap: db-init
    persistence:
      enabled: false # Keep it simple for dev
